<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script>
			// 设置cookie  
			
			// expires和max-age的默认值为session  当浏览器关闭则cookie被清空
			// document.cookie = 'name=宋鑫';
			
			// max-age的单位为秒
			// document.cookie = 'name=宋鑫;max-age='+(365*24*60*60+8*60*60);
			
			// 同一个cookie名只能设置一个值
			var username = '马洁';
			var endTime = 365*24*60*60+8*60*60;
			document.cookie = 'name='+username+';max-age='+endTime;
			
			
			var goods = {
				name:'牙刷',
				price:198,
				time:'1年'
			}
			// JSON.stringify()将对象转换为字符串 
			var objStr = JSON.stringify(goods);
			
			
			// document.cookie = 'goods='+objStr+';max-age='+60*60*9+';path=/';
			
			var time = new Date();
			time.setMinutes(time.getMinutes()+60*8+1)
			document.cookie = 'goods='+objStr+';expires='+time.toUTCString()+';path=/';
			
			
			// 封装setCookie  设置cookie
			/* 
				name  cookie的名字
				value cookie的值
				minutes 设置cookie失效的时间   单位:分
			 */
			function setCookie(name,value,minutes){
				var now = new Date();
				now.setMinutes(now.getMinutes()+minutes);
				
				// 设置cookie
				document.cookie = name+'='+value+';expires='+now.toUTCString();
			}
			
			setCookie('username','覃雷',60);
			
			
			
			// cookie的失效:1  cookie到了失效的时间   2 手动清除
			
			// 将cookie的失效时间设置为过期时间,则cookie就清除了
			// setTimeout(function(){
			// 	// 手动清除cookie
			// 	setCookie('username',false,-1)
			// 	
			// },2000)
			
			// 获取cookie的数据
			
			
			
			// split()  slice()  substring()
			
			// 方式一
			// var index1 = document.cookie.indexOf('goods');
			
			// if(index1 != -1){
			// 	var str = document.cookie.slice(index1);
				
			// 	var index2 = str.indexOf(';');
			// 	
				
			// 	if(index2 != -1){
			// 		var newStr = str.slice(0,index2)
			// 		
			// 	}else{
			// 		newStr = str;
			// 	}
				
			// 	var arr = newStr.split('=');
			// 	
				
			// }
			// 
			
			
			// 方式二:
			function getMessage(str,key){
				var arr = str.split('; ')
				// 
				
				for(var i=0;i<arr.length;i++){
					// 
					
					if(arr[i].indexOf(key)>-1){
						// 
						var newArr = arr[i].split('=')
						
					}
				}
			}
			
			getMessage(document.cookie,'username')
			
		</script>
	</body>
</html>
