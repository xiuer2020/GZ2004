<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			*{margin:0;padding:0;}
			div#chat{width:600px;background:pink;padding:10px;margin:10px auto;border-radius:5px;}
			div#chat>#message{width:600px;height:450px;background:white;border-radius:5px;padding-top:10px;}
			div#chat>#message>.message{height:40px;margin:5px 20px 5px 0px;position:relative;}
			div#chat>#message>.message>span.bubble{background:#aaa;padding:10px;border-radius:5px;float:right;}
			div#chat>#message>.message>span.tail{display:inline-block;width:0px;border:10px solid transparent;border-left:10px solid #aaa;position:absolute;left:580px;top:13px;}
			div#chat>#send{width:600px;height:130px;margin:10px 0px;}
			div#chat>#send>textarea{width:100%;height:90px;border-radius:5px;resize:none;outline:0;border:0px;font-size:18px;}
			div#chat>#send>button{width:100px;height:40px;border:0;border-radius:10px;float:right;outline:0px;}
			div#chat>#send>button.active{background:indianred;color:white;}
		</style>
	</head>
	<body>
		<div id="chat">
			<div id="message">
		<!-- 		<div class="message">
					<span class="bubble">面向对象，首先得有对象1</span>
					<span class="tail"></span>
				</div> -->
			</div>
			<div id="send">
				<textarea></textarea>
				<button>发送（Alt+S）</button>
			</div>
			
			<script>
				// 封装聊天的构造函数
				function Chat(message,textarea,btn){
					this.message = message;
					this.textarea = textarea;
					this.btn = btn;
					
					// 调用init初始化方法
					this.init();
				}
				
				// 定义初始化函数  init
				Chat.prototype.init = function(){
					// 给btn绑定鼠标按下事件
					//将当前对象赋值给that 可以在事件内拿到当前的Chat对象
					var that = this;
					this.btn.onmousedown = function(e){
						// 
						
						// var res = that.mouseLeft(e)
						if(that.mouseLeft(e)){
							// 将按钮的颜色改变
							that.btn.setAttribute('class','active')
						}
						
						that.onmouseup = function(evt){
							// if(that.mouseLeft(e)){
							// 	// 将按钮的颜色改变
							// 	that.btn.removeAttribute('class','active')
							// }
						}
					}
				}
				
				// 判断是否鼠标左键按下   调用该方法可以自动判断是左键还是其他键
				Chat.prototype.mouseLeft = function(evt){
					// 判断浏览器是否为旧版IE
					var isIE = evt ? false : true;
					
					// 
					// 判断是否按下的是左键
					if(evt.button == 0 || (isIE && evt.button == 1)){
						return true;
					}else{
						return false;
					}
				}
				
				// 发送消息
				Chat.prototype.sendMessage = function(){
					
				}
				
				window.onload = function(){
					// 获取到聊天框
					var message = document.getElementById('message')
					
					// 获取到输入框
					var textarea = document.getElementsByTagName('textarea')[0];
					
					// 发送按钮
					var btn = textarea.nextElementSibling;
					
					// 
					
					var chat = new Chat(message,textarea,btn)
					
				}
			</script>
		</div>
	</body>
</html>
